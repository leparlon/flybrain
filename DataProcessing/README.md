# Fly Brain Data

## How was it done
### Source:
All the data used to convert a fly brain to Godot came from the article:  
[Link to article](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7614541/)   
Winding M, Pedigo BD, Barnes CL, Patsolic HG, Park Y, Kazimiers T, Fushiki A, Andrade IV, Khandelwal A, Valdes-Aleman J, Li F, Randel N, Barsotti E, Correia A, Fetter RD, Hartenstein V, Priebe CE, Vogelstein JT, Cardona A, Zlatic M. The connectome of an insect brain. Science. 2023 Mar 10;379(6636):eadd9330. doi: 10.1126/science.add9330. Epub 2023 Mar 10. PMID: 36893230; PMCID: PMC7614541.   
The process was straightforward as all the data was readily available for download in CSV format.  
### Process
#### Weights and Connections
In the article's Supplementary Material section, there is a Supplementary Data S1 zip file, which contains various CSV files representing the connections between neurons. These files specify different types of connections between neurons, dendrites, and axons. I needed a comprehensive dataset, which I found in `all-all_connectivity_matrix.csv` (not included in this repository).

To format the data for use in Godot, I ran `converter.py`, which transformed the large *3000x3000 sparse CSV matrix* into a list of connections and weights:
```gd
'Neuron Name' = [Connected Neuron = weight, Connected Neuron = weight, ...]   
'Neuron Name' = [Connected Neuron = weight, Connected Neuron = weight, ...]   
``` 
The file generated: `\GodotPlugin\addons\fly_brain_plugin\weights.gd` (was edited for use in the Godot plugin)
   
#### Neuron function
To simulate the brain, it was essential to know which neurons are sensory and which are responsible for muscle movement. This information was found in another supplementary file, Supplementary Data S2, which contained `EMS175448-supplement-Supplementary_Data_S2.csv`.  

The file header includes:`left_id,right_id,celltype,additional_annotations,level_7_cluster`.  I ignored `level_7_cluster`, but the remaining columns indicated whether the neuron was on the left or right side and its macro function (e.g., celltype indicating if it is sensory). Using the annotations, I could ascertain its micro function (e.g., a sensory neuron with a visual annotation is a visual neuron).
I created `categorizer_v2.py` to categorize every neuron and generate three files:

`sensory_neurons.gd`Lists sensory-related neurons:
'Visual', 'Olfactory (Smell)', 'Thermo-Warm (Warm Temperature)', 'Gustatory External (Taste External)', 'Gustatory Pharynx (Taste Internal)', and 'Thermo-Cold (Cold Temperature)'.

`ascending_neurons.gd`: Lists ascending sensory-related neurons:
'Mechanosensory Chordotonals', 'Nociceptive (Pain Sensing)', 'Mechanosensory Class II/III', and 'Proprioceptive (Body Position)'.

`additional_neurons.gd`: Contains all other neurons, focusing on those that might create movement. From the article, I assumed these were the *Descending Neurons to the Ventral Nerve Cord*, annotated as *DN-VNC*.

#### List of Neurons
The plugin code requires a simple list of all neurons to run the connectome. This list is generated by `neurons_lister.py`.

All the aforementioned files, slightly edited from the script's output, can be found in `\GodotPlugin\addons\fly_brain_plugin\`.
